<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>NFC-SOS</title>
<style>
body{font-family:sans-serif;background:#071026;color:#e7f3f7;padding:20px;}
.card{background:#0b1622;padding:20px;border-radius:12px;max-width:500px;margin:auto;}
textarea{width:100%;height:100px;border-radius:10px;padding:8px;border:none;margin-bottom:10px;}
.btn{background:#06b6d4;color:#012;padding:10px 14px;border:none;border-radius:10px;font-weight:700;cursor:pointer;}
</style>
</head>
<body>
<div class="card">
  <h2>üö® NFC-SOS</h2>
  <p>–û–ø–∏—à–∏—Ç–µ —Å–∏—Ç—É–∞—Ü–∏—é –∏ –æ—Ç–ø—Ä–∞–≤—å—Ç–µ —Å–æ–æ–±—â–µ–Ω–∏–µ. –ú–æ–∂–Ω–æ –æ—Ç–ø—Ä–∞–≤–∏—Ç—å –∞–Ω–æ–Ω–∏–º–Ω–æ.</p>
  <form id="sosForm" target="dummyframe" action="GOOGLE_FORM_ACTION_URL" method="POST">
    <textarea name="entry.MESSAGE_ENTRY_ID" placeholder="–û–ø–∏—Å–∞–Ω–∏–µ..." required></textarea>
    <br>
    <label><input type="checkbox" name="entry.ANON_ENTRY_ID"> –û—Ç–ø—Ä–∞–≤–∏—Ç—å –∞–Ω–æ–Ω–∏–º–Ω–æ</label>
    <input type="hidden" name="entry.LAT_ENTRY_ID" id="lat">
    <input type="hidden" name="entry.LNG_ENTRY_ID" id="lng">
    <input type="hidden" name="entry.TAG_ENTRY_ID" id="tagId" value="">
    <br><br>
    <button type="submit" class="btn">–û—Ç–ø—Ä–∞–≤–∏—Ç—å</button>
  </form>
  <iframe name="dummyframe" style="display:none;"></iframe>
</div>

<script>
  // –ì–µ–æ–ª–æ–∫–∞—Ü–∏—è
  if(navigator.geolocation){
    navigator.geolocation.getCurrentPosition(pos=>{
      document.getElementById('lat').value = pos.coords.latitude.toFixed(6);
      document.getElementById('lng').value = pos.coords.longitude.toFixed(6);
    });
  }

  // –ü–æ–ª—É—á–µ–Ω–∏–µ NFC ID –∏–∑ URL
  const params = new URLSearchParams(window.location.search);
  const tag = params.get('id');
  if(tag) document.getElementById('tagId').value = tag;
</script>
</body>
</html>
